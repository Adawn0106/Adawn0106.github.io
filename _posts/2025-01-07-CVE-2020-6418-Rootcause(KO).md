---
layout: post
read_time: true
show_date: true
title: "CVE-2020-6418-Rootcause(KO)"
date: 2025-01-07
img: posts/20240925/v8_picture.png
tags: [V8, 1-day, rootcause]
category: Rootcause
author: adawn0106
description: "CVE-2020-6418-Rootcause(KO)"
comments: true

---

Chrome v8 CVE-2020-6418의 Root cause에 대해 소개해보겠습니다.

## 환경설정

```
# install depot_tools
cd ~
git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
export PATH=$HOME/depot_tools:$PATH
echo 'export PATH=$HOME/depot_tools:$PATH' >> ~/.zshrc

# get V8
cd ~
mkdir v8
cd v8
fetch v8
cd v8
git checkout bdaa7d66a37adcc1f1d81c9b0f834327a74ffe07


# build V8

gclient sync -D
sudo apt install -y python ninja-build
build/install-build-deps.sh
./tools/dev/gm.py x64.release
```



## 사전지식

해당 Root cause를 설명하기 위해 필요한 개념들에 대해 먼저 소개해보겠습니다.


### Map Inference 

Map Inference는 V8에서 최적화 과정에서 object의 map, 즉 type을 추론하는 작업을 합니다.
이러한 작업을 하는 이유는 v8은 동적언어인 JS를 사용하기 때문에 Runtime에서 Map이 변경될수도 있습니다.
이때 계속하여 Map 정보를 업데이트 해줘야 최적화를 진행 또는 유지할 수 있습니다.

하나의 예시를 살펴보겠습니다. 


![2020_1.png](https://github.com/Adawn0106/Adawn0106.github.io/raw/main/assets/img/posts/20250107/2020_1.png)

(v8에서 Debug 명령들을 사용하기 위해선 `--allow-natives-syntax` 옵션을 사용해줘야 합니다.)
현재 해당 배열은 SMI 타입인 걸 확인할 수 있습니다. 

















